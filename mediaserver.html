<!DOCTYPE html>
<html>

<head>
  <title>Media Server API Specification</title>
  <meta charset="UTF-8">
  <script src='https://www.w3.org/Tools/respec/respec-w3c-common'
          class='remove'></script>
  <script class="remove">
    var respecConfig = {
          specStatus:           "unofficial",
          shortName:            "dlna",
          wg:            	"SSD-OTC.DLNA",
          wgURI:		"https://github.com/01org/cloud-dleyna/wiki",
          wgPublicList:		"none",
          wgPatentURI:		"XXX",
          edDraftURI:           "https://github.com/01org/cloud-dleyna/wiki",
          editors: [
            { name: "Luc Yriarte", company: "Intel",
                    companyURL: "http://www.intel.com/" }
          ]
    };
  </script>
</head>

<!-----------------------------------------------------------------------------
Style guide to contributors:
============================
- this document uses ReSpec, see
  http://dev.w3.org/2009/dap/ReSpec.js/documentation.html
- use 80 characters wide lines, whenever possible (except long links)
- keep sections 2 empty lines apart
- put comments in front of sections, for better readability with syntax
  coloring editors
- use indentation with care: it may improve readability, but at the expense of
  line lenght
- when descriptions of attributes is short, use the <dd> elements even when
  the text also contains conformance statements (e.g. MUST, SHOULD, MAY).
  No use repeating the same information in a separate paragraph.
------------------------------------------------------------------------------>

<body>

<!------------------------------ Abstract ------------------------------------>
<section id="abstract">
<a href="https://live.gnome.org/Rygel/MediaServer2Spec/">Media Server</a> API
to discover and manage images, videos, and music. 
</section>



<!----------------------------- Terminology ---------------------------------->
<section>
  <h2>Terminology</h2>
  <p>The <dfn>
  <a href="http://dev.w3.org/html5/spec/webappapis.html#eventhandler"><code>
  EventHandler</code></a></dfn> interface represents a callback used for event
  handlers as defined in [[!HTML5]].</p>

  <p>The concepts <dfn>
  <a href="http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">
       queue a task</a></dfn> and <dfn>
  <a href="http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">
  fire a simple event</a></dfn> are defined in [[!HTML5]].</p>

  <p>The terms <dfn>
  <a href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers">
  event handler</a></dfn>  and <dfn>
<a href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">
  event handler event types</a></dfn> are defined in [[!HTML5]].</p>
  
  <p>The <dfn><a href="http://dom.spec.whatwg.org/#event"><code>Event</code>
  </a></dfn> interface and the <dfn>
  <a href="http://dom.spec.whatwg.org/#promise"><code>Promise</code></a></dfn>
  interface as well as the concept of a 
  <a href="http://dom.spec.whatwg.org/#concept-resolver"><dfn>resolver</dfn>
  </a>are defined in [[!DOM4]].</p>
</section>



<!------------------------ Interface MediaContainer -------------------------->
<section>
  <h2><a>MediaContainer</a> Interface</h2>
  <p>The media container interface.
  </p>

  <dl title="[NoInterfaceObject]
             interface MediaContainer : MediaObject"
          class="idl">

    <dt>readonly attribute unsigned long? childCount</dt>
    <dd>Number of child media items and containers.</dd>

    <dt>readonly attribute boolean canCreateContainer</dt>
    <dd>True if a container can be created in this container.</dd>

    <dt>readonly attribute boolean canDelete</dt>
    <dd>True if an item can be deleted in this container.</dd>

    <dt>readonly attribute boolean canUpload</dt>
    <dd>True if an item can be uploaded in this container.</dd>

    <dt>readonly attribute boolean canRename</dt>
    <dd>True if an item can be renamed in this container.</dd>

    <dt><a>Promise</a> upload(DOMString title,
      DOMString path)</dt>
    <dd>Uploads a media item on the server, in the current container.
    This method returns a new <code>Promise</code> to notify the caller 
    about the operation success or failure.</dd>

    <dt><a>Promise</a> createFolder(DOMString title)</dt>
    <dd>Creates a folder on the server, under the current container.
    This method returns a new <code>Promise</code> to notify the caller 
    about the operation success or failure.</dd>
</dl>

</section> <!-- MediaContainer -->



<!---------------------- Extended interface Navigator ------------------------>
<section>
  <h2>Extensions to <code>Navigator</code> object</h2>
  <p>The <a>MediaServerManager</a> interface is exposed on [[!HTML]]'s
  <a href="http://www.whatwg.org/specs/web-apps/current-work/#dom-navigator">
  <code>Navigator</code></a> object.
  </p>
  <dl title="partial interface Navigator" class="idl">
    <dt>readonly attribute MediaServerManager mediaServer</dt>
    <dd>The object that exposes the default local network media servers manager
      on the device.</dd>
  </dl>
</section>

<!------------------------ Interface MediaServerManager ---------------------->
<section>
  <h2><a>MediaServerManager</a> Interface</h2>
  <p>The <a>MediaServerManager</a> interface defines access to local network 
    media servers discovery functionality.
  </p>
  
  <dl title="[NoInterfaceObject]
             interface MediaServerManager : EventTarget"
          class="idl">

    <dt>void scanNetwork()</dt>
    <dd>Scans local network for <a>MediaServer</a>s.</dd>
    
    <dt class="no-docs"> attribute EventHandler onserverfound</dt>
    <dd>Event handler called when the <code><a>serverfound</a></code>
    event is dispatched.</dd>
    
    <dt class="no-docs"> attribute EventHandler onserverlost</dt>
    <dd>Event handler called when the <code><a>serverlost</a></code>
    event is dispatched.</dd>
  </dl>

  <section>
  <h3>Event handlers</h3>
  <p>The following are the <a>event handlers</a> (and their corresponding
  <a>event handler types</a>) that MUST be supported as attributes by the
  <a>MediaServerManager</a> object.
  <table class="simple">
    <thead>
      <tr>
        <th>event handler</th>
        <th>event name</th>
        <th>event type</th>
        <th>short description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong><code>onserverfound</code></strong></td>
        <td><code><dfn>serverfound</dfn></code></td>
        <td><a>MediaServerEvent</a> with <code>server</code> property
          set to the new <a>MediaServer</a> object.</td>
        <td>Fired when a <a>MediaServer</a> appears on the 
          local network.</td>
      </tr>
      <tr>
        <td><strong><code>onserverlost</code></strong></td>
        <td><code><dfn>serverlost</dfn></code></td>
        <td><a>MediaServerIdEvent</a> with <code>id</code> property
          set to a DOMString with the id of the lost <a>MediaServer</a>.</td>
        <td>Fired when a <a>MediaServer</a> disappears from the 
          local network.</td>
      </tr>
    </tbody>
  </table>
  </section> <!-- Event handlers -->
</section> <!-- MediaServerManager -->      


<!------------------------ Interface MediaServerEvent ------------------------>
<section>
  <h2><a>MediaServerEvent</a> Interface</h2>

  <dl title="interface MediaServerEvent : Event" class="idl">

    <dt>readonly attribute MediaServer server</dt>
    <dd>When getting, the user agent MUST return the <a>MediaServer</a>
    that triggered the event.</dd>
  </dl>

</section><!-- MediaServerEvent -->


<!------------------------ Interface MediaServerIdEvent ---------------------->
<section>
  <h2><a>MediaServerIdEvent</a> Interface</h2>

  <dl title="interface MediaServerIdEvent : Event" class="idl">

    <dt>readonly attribute DOMString id</dt>
    <dd>When getting, the user agent MUST return the id of the 
    <a>MediaServer</a> that triggered the event.</dd>
  </dl>

</section><!-- MediaServerIdEvent -->


<!------------------------ Interface MediaServer -------------------------->
<section>
  <h2><a>MediaServer</a> Interface</h2>
  <p>The media server interface.
  </p>

  <dl title="[NoInterfaceObject]
             interface MediaServer : EventTarget"
          class="idl">

    <dt>readonly attribute DOMString id</dt>
    <dd>An opaque unique ID.</dd>

    <dt>readonly attribute DOMString? friendlyName</dt>
    <dd>A user-friendly name for the device.</dd>

    <dt>readonly attribute DOMString? manufacturer</dt>
    <dd>A string identifying the manufacturer of the server.</dd>

    <dt>readonly attribute DOMString? manufacturerURL</dt>
    <dd>A URL pointing to the manufacturer's web site.</dd>

    <dt>readonly attribute DOMString? modelDescription</dt>
    <dd>A description of the server.</dd>

    <dt>readonly attribute DOMString? modelName</dt>
    <dd>The model name of the server.</dd>

    <dt>readonly attribute DOMString? modelNumber</dt>
    <dd>The server's version number.</dd>

    <dt>readonly attribute DOMString? serialNumber</dt>
    <dd>The server's serial number.</dd>

    <dt>readonly attribute DOMString? UDN</dt>
    <dd>The Unique Device Name of the server.</dd>

    <dt>readonly attribute DOMString? presentationURL</dt>
    <dd>The URL of the server's HTML management interface.</dd>

    <dt>readonly attribute DOMString? iconURL</dt>
    <dd>A URL pointing to an icon that graphically identifies the server</dd>

    <dt>readonly attribute DOMString? deviceType</dt>
    <dd>The UPnP type of the device.</dd>

    <dt>readonly attribute <a>MediaContainer</a>? root</dt>
    <dd>Media Server root folder.</dd>

    <dt>readonly attribute boolean canCreateContainer</dt>
    <dd>True if a container can be created on this server, at a location 
    managed by the server.</dd>

    <dt>readonly attribute boolean canUpload</dt>
    <dd>True if an item can be uploaded on this server, at a location 
    managed by the server.</dd>

    <dt>readonly attribute DOMString[] searchAttrs</dt>
    <dd>List of attributes that can be used in search queries.</dd>

    <dt>readonly attribute DOMString[] sortAttrs</dt>
    <dd>List of attributes that can be used to sort 
    search or browse action results.</dd>

    <dt><a>Promise</a> upload(DOMString path)</dt>
    <dd>Uploads a media item on the server.
    This method returns a new <code>Promise</code> to notify the caller 
    about the operation success or failure.</dd>

    <dt><a>Promise</a> createFolder(DOMString title)</dt>
    <dd>Creates a folder on the server.
    This method returns a new <code>Promise</code> to notify the caller 
    about the operation success or failure.</dd>

    <dt><a>Promise</a> browse(DOMString containerId,
      DOMString? sortMode,
      unsigned long? count,
      unsigned long? offset,
      )</dt>
    <dd>Browses for media item under a given <a>MediaContainer</a>.
    This method returns a new <code>Promise</code> that will notify the caller
    with the result of the operation, which is an Array of
      <a>MediaObject</a>s.</dd>

    <dt><a>Promise</a> find(DOMString containerId,
      DOMString? searchFilter,
      DOMString? sortMode,
      unsigned long? count,
      unsigned long? offset,
      )</dt>
    <dd>Searches for media item under a given <a>MediaContainer</a>.
    This method returns a new <code>Promise</code> that will notify the caller
    with the result of the operation, which is an Array of
      <a>MediaObject</a>s.</dd>

    <dt><a>Promise</a> cancel()</dt>
    <dd>Cancels all requests a client has outstanding on that server.
    This method returns a new <code>Promise</code> to notify the caller 
    about the operation success or failure.</dd>

    <dt class="no-docs"> attribute EventHandler oncontainerchanged</dt>
    <dd>Event handler called when the <code><a>containerchanged</a></code>
    event of type <code><a>MediaContainerIdEvent</a></code> is dispatched. 
    The <code>id</code> property of the event MAY 
    contain the id of a <a>MediaContainer</a> object which content was 
    modified, if the server supports it.</dd>
  </dl>

  <section>
  <h3>Event handlers</h3>
  <p>The following are the <a>event handlers</a> (and their corresponding
  <a>event handler types</a>) that MUST be supported as attributes by the
  <a>MediaServer</a> object.
  <table class="simple">
    <thead>
      <tr>
        <th>event handler</th>
        <th>event name</th>
        <th>event type</th>
        <th>short description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong><code>oncontainerchanged</code></strong></td>
        <td><code><dfn>containerchanged</dfn></code></td>
        <td><a>MediaContainerIdEvent</a> with <code>id</code> property
          set to a DOMString with the id of a <a>MediaContainer</a>.</td>
        <td>Fired when content was added, removed or modified in a given
        <a>MediaContainer</a> on the <a>MediaServer</a>.</td>
      </tr>
    </tbody>
  </table>
  </section> <!-- Event handlers -->
</section> <!-- MediaServer -->


<!------------------------ Interface MediaContainerIdEvent -------------------->
<section>
  <h2><a>MediaContainerIdEvent</a> Interface</h2>

  <dl title="interface MediaContainerIdEvent : Event" class="idl">

    <dt>readonly attribute DOMString id</dt>
    <dd>When getting, the user agent MUST return the id of the 
    <a>MediaContainer</a> that triggered the event.</dd>
  </dl>

</section><!-- MediaContainerIdEvent -->



</body>
</html>

